- 日本語で回答してください。

## スキルの管理範囲

### このリポジトリで管理しているスキル（編集可能）

- `managing-team`: 複数のClaudeエージェントで協力開発
- `quality-check`: コミットやPR作成後のレビュー

これらのスキルは `.claude/skills/` 配下で管理されており、改善提案がある場合はこのリポジトリにIssueを作成してください。

### 外部プラグインで管理しているスキル（編集不可）

- `base-tools:create-pr`: PR作成
- `base-tools:fix-pr`: PR修正・マージ
- `base-tools:teardown-worktree`: worktree削除
- `base-tools:retro`: 振り返り
- `base-tools:solve-issue`: Issue解決フロー
- `base-tools:setup-worktree`: worktree作成

これらのスキルは外部プラグイン（canpok1-plugins/base-tools）で管理されており、このリポジトリでは編集できません。改善提案がある場合は、https://github.com/canpok1/claude-code-plugins にIssueを作成してください。

## agent teamの使用指針

### 使用すべき場合

以下の条件を満たす場合、agent teamの使用を検討してください：

- **複数の独立したタスクを並行で実行できる場合**
  - 各タスクが明確に分割でき、相互依存が少ない
  - 並行実行により開発速度を大幅に向上できる

- **各タスクが明確に分割でき、役割分担が可能な場合**
  - 機能やレイヤーごとに明確な責任範囲を定義できる
  - 各メンバーが独立して作業を完結できる

- **機能のまとまりごとにコミットを作成したい場合**
  - 変更履歴を機能単位で追跡しやすくしたい
  - レビューやロールバックを容易にしたい

### チーム構成の例

- **リーダー（team-lead）**
  - 全体設計のレビュー
  - 各メンバーの成果物の統合確認
  - タスクの割り当てと進捗管理
  - 最終的なPR作成とマージ

- **メンバー（例）**
  - **project-setup**: プロジェクト構造とビルド設定の実装
  - **data-layer**: データモデルとストレージレイヤーの実装
  - **ai-layer**: AI連携インターフェースの実装

### タスク管理

- **TaskCreate**: 各タスクを作成し、責任範囲を明確にする
  - `subject`: タスクの簡潔な説明（例: "プロジェクト構造を作成"）
  - `description`: 詳細な要件と完了条件
  - `activeForm`: 進行中の表示（例: "プロジェクト構造を作成中"）

- **TaskUpdate**: タスクの依存関係を設定
  - `addBlockedBy`: 先に完了すべきタスクを指定
  - 例: 統合タスクは各実装タスクの完了後に実行するよう設定

- **タスク完了**: 各メンバーが完了後にタスクをcompletedに更新
  - `status: "completed"` で完了を明示
  - 次のタスクが自動的にアンブロックされる

### コミット方針

- **各メンバーが独立した機能ごとにコミット**
  - 1つの機能 = 1つのコミット
  - 責任範囲を明確にし、変更履歴を追跡しやすくする

- **コミットメッセージの形式**
  - 基本形式: `{機能名}を{動詞}`
  - 例:
    - "プロジェクト構造を作成"
    - "データモデルを実装"
    - "AI連携インターフェースを定義"

- **Issue番号の含め方**
  - 関連するIssueがある場合: `#{Issue番号} {コミットメッセージ}`
  - 例: `#11 プロジェクト構造を作成`

### 実装例（Issue #11より）

```text
チーム構成:
- team-lead（リーダー）
- project-setup（プロジェクト構造担当）
- data-layer（データレイヤー担当）
- ai-layer（AIレイヤー担当）

タスク構成:
1. プロジェクト構造を作成（project-setup）
2. データモデルを実装（data-layer）
3. AI連携インターフェースを定義（ai-layer）
4. 統合確認とドキュメント作成（team-lead） ← タスク1-3に依存

結果:
- 3つの独立した機能を並行開発
- 各機能ごとに意味のあるコミットを作成
- 効率的にタスクを完了
```

### worktreeとの組み合わせ使用時の注意

- **agent teamを使用する場合、worktreeの使用は推奨しません**
  - チームメンバーは元のリポジトリで作業するため、リーダーがworktreeで作業すると作業ディレクトリが不一致になります
  - ファイルを手動でコピーする必要があり、非効率です

- **推奨される方法**:
  1. **agent teamを使用する場合**: 元のリポジトリのブランチで作業する（worktreeを使用しない）
  2. **worktreeを使用する場合**: agent teamを使用せず、単独で作業する

### 振り返りとチーム削除

- **タスク完了後の手順**
  1. `/retro` を実行してチーム全員で振り返りを行う
  2. 振り返り完了後、各メンバーにシャットダウンリクエストを送信
  3. 全メンバーがシャットダウンしたら `TeamDelete` でチームを削除

- **注意点**
  - チーム削除前に必ず振り返りを実施すること
  - 振り返りではチーム全員の知見を共有し、改善点を記録する
